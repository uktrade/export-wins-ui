var ew={components:{},pages:{},application:{components:{}}};ew.CustomEvent=function(){function a(){this.subscribers=[]}var b=a.prototype;return b.subscribe=function(a){this.subscribers.push(a)},b.unSubscribe=function(a){for(var b=0,c=this.subscribers.length;b<c;b++)if(this.subscribers[b]===a){this.subscribers.pop(b,1);break}},b.publish=function(){for(var a=this.subscribers.length-1;a>=0;a--)try{this.subscribers[a].apply(this,arguments)}catch(a){}},a}(),ew.components.AddContributors=function(a){function b(b){if(!b)throw new Error("opts are required to create AddContributorsComponent");if(!b.contributorsSelector)throw new Error("contributorsSelector is required for AddContributorsComponent");if(!b.nameInputSelector)throw new Error("nameInputSelector is required for AddContributorsComponent");var c=this;this.$contributors=a(b.contributorsSelector),this.contributorsSelector=b.contributorsSelector,this.nameInputSelector=b.nameInputSelector,this.shownContributors=0,this.contributorsLength=this.$contributors.length,this.createAddButton(),this.hideContributingLines(),this.showCloseButton(),this.$contributors.on("click",".remove-contributor",function(a){c.removeContributor(a,this)})}return b.prototype.focusOnFirstNameInput=function(){var b=a(this.$contributors[0]).find(this.nameInputSelector);b.val()||b.focus()},b.prototype.showCloseButton=function(){var b='<button type="button" class="btn btn-xs btn-default remove-contributor" aria-label="Remove contributor" title="Remove contributor">Remove</button>',c=a(this.contributorsSelector+":visible").last();c.is(this.$contributors[0])||c.prepend(b)},b.prototype.removeCloseButton=function(){a(this.contributorsSelector+" .remove-contributor").remove()},b.prototype.updateCloseButton=function(){this.removeCloseButton(),this.showCloseButton()},b.prototype.createAddButton=function(){this.$addButton=a('<button class="btn btn-default">Add another contributor</button>'),this.$contributors.parent().append(this.$addButton),this.$addButton.on("click",a.proxy(this.addContributor,this))},b.prototype.hideContributingLines=function(){var b=this;b.$contributors.each(function(c){var d,e=a(this);0===c?e.show():c>b.shownContributors?(d=e.find(b.nameInputSelector),d.val().length>0?(e.show(),b.shownContributors++):e.hide()):e.hide()})},b.prototype.addContributor=function(b){var c;b.preventDefault(),this.shownContributors<this.contributorsLength?(this.shownContributors++,c=a(this.$contributors[this.shownContributors]),c.show(),c.find(this.nameInputSelector).focus(),this.updateCloseButton(),this.checkAddButtonState()):alert("Sorry, the system can't add more than 5 contributing teams. Please choose teams that contributed the most.")},b.prototype.checkAddButtonState=function(){var a=this.shownContributors===this.contributorsLength-1;this.$addButton[0].disabled=a},b.prototype.removeContributor=function(b,c){var d=a(c).parent(this.contributorsSelector);d.hide(),d.find("input").val(""),d.find("select").each(function(){this.selectedIndex=0}),this.shownContributors--,this.updateCloseButton(),this.checkAddButtonState()},b}(jQuery),ew.components.ToggleContributors=function(a){function b(a){if(!a)throw new Error("opts is required for ToggleContributorsComponent");if(!a.$contributingTeamDetails)throw new Error("$contributingTeamDetails is required for ToggleContributorsComponent");if(!a.$someContributors)throw new Error("$someContributors is required for ToggleContributorsComponent");if(!a.noContributorsSelector)throw new Error("noContributorsSelector is required for ToggleContributorsComponent");this.$contributingTeamDetails=a.$contributingTeamDetails,this.$someContributors=a.$someContributors,this.noContributorsSelector=a.noContributorsSelector,this.events={showDetails:new ew.CustomEvent},this.checkContributingDetails(),this.createListeners()}return b.prototype.toggleContributingDetails=function(a){this.$someContributors[0].checked?(this.$contributingTeamDetails.show(),this.events.showDetails.publish()):this.$contributingTeamDetails.hide()},b.prototype.createListeners=function(){var b=a(this.noContributorsSelector),c=a.proxy(this.toggleContributingDetails,this);this.$someContributors.on("click",c),b.on("click",c)},b.prototype.checkContributingDetails=function(){this.$someContributors[0].checked||this.$contributingTeamDetails.hide()},b}(jQuery),ew.components.ToggleExportValue=function(a){function b(a){return a+" is required for ToggleExportValueComponent"}function c(c){if(!c)throw new Error(b("opts"));if(!c.fieldName)throw new Error(b("opts.fieldName"));if(!c.exportValue)throw new Error(b("opts.exportValue"));if(!c.nonExportValue)throw new Error(b("opts.nonExportValue"));if(!c.bothValue)throw new Error(b("opts.bothValue"));if(!c.exportId)throw new Error(b("opts.exportId"));if(!c.nonExportId)throw new Error(b("opts.nonExportId"));this.fieldName=c.fieldName,this.exportValue=c.exportValue,this.nonExportValue=c.nonExportValue,this.bothValue=c.bothValue,this.$exportContent=a("#"+c.exportId),this.$nonExportContent=a("#"+c.nonExportId),this.$field=a("input[ name="+this.fieldName+"]"),this.$field.on("change",a.proxy(this.showContent,this)),this.showContent()}return c.prototype.showContent=function(){var b=a("input[ name="+this.fieldName+"]:checked").val();switch(b){case this.exportValue:this.$exportContent.show(),this.$nonExportContent.hide();break;case this.nonExportValue:this.$exportContent.hide(),this.$nonExportContent.show();break;case this.bothValue:this.$exportContent.show(),this.$nonExportContent.show();break;default:this.$exportContent.hide(),this.$nonExportContent.hide()}},c}(jQuery),ew.components.WordCounter=function(a){function b(b){if(!b)throw new Error("opts is required for WordCounterComponent");if(!b.limit)throw new Error("You need to specify a limit for WordCounterComponent");if(!b.id)throw new Error("You need to provide an id for WordCounterComponent");this.limit=b.limit,this.$input=a("#"+b.id),this.createCounter(),this.$input.on("keyup",a.proxy(this.upateCharacterCount,this))}var c="text-danger";return b.prototype.createCounter=function(){this.$counter=a('<span class="word-counter">0 characters</span>'),this.$counter.insertAfter(this.$input),this.upateCharacterCount()},b.prototype.upateCharacterCount=function(){var a=this.$input.val(),b=a?a.length:0,d=1===b?"character":"characters";this.$counter.text(b+" "+d),b>this.limit?this.$counter.addClass(c):this.$counter.removeClass(c)},b}(jQuery),ew.pages.confirmationForm=function(a){var b=$("#confirm-false-info"),c=$("form input[name="+a+"]");$("#confirm-false-details");c[1].checked||b.hide(),c.on("change",function(a){c[0].checked?b.hide():b.show()})},ew.pages.officerForm=function(){function a(){$("#id_team_type").on("change",function(){var a=$(this).val(),b=$("#id_hq_team option[value^="+a+"]");$("#id_hq_team option").addClass(d),b.removeClass(d),$("#id_hq_team").val(b.first().val())})}function b(){$(".contributing-officer-team-group .contributing-team-type select").on("change",function(){var a=$(this),b=a.val(),c=a.closest(".row").find(".contributing-team select"),e=c.find("option[value^="+b+"]");c.val(e.first().val()),c.find("option").addClass(d),e.removeClass(d)})}function c(a){return a+" is required for officerFormPage"}var d="hidden";return function(d){if(!d)throw new Error(c("opts"));if(!d.descriptionId)throw new Error(c("opts.descriptionId"));if(!d.exportName)throw new Error(c("opts.exportName"));if(!d.exportContentId)throw new Error(c("opts.exportContentId"));if(!d.nonExportContentId)throw new Error(c("opts.nonExportContentId"));if(!d.exportValue)throw new Error(c("opts.exportValue"));if(!d.nonExportValue)throw new Error(c("opts.nonExportValue"));if(!d.bothValue)throw new Error(c("opts.bothValue"));var e=ew.application,f=e.components;a(),b(),f.toggleContributors=new ew.components.ToggleContributors({$contributingTeamDetails:$("#contributing-teams-details"),$someContributors:$("#some-contributors"),noContributorsSelector:"#no-contributors"}),f.addContributors=new ew.components.AddContributors({contributorsSelector:".contributing-officer-group",nameInputSelector:".contributing-officer-name input"}),f.descriptionWordCounter=new ew.components.WordCounter({id:d.descriptionId,limit:600}),f.exportValues=new ew.components.ToggleExportValue({fieldName:d.exportName,exportValue:d.exportValue,nonExportValue:d.nonExportValue,bothValue:d.bothValue,exportId:d.exportContentId,nonExportId:d.nonExportContentId}),f.toggleContributors.events.showDetails.subscribe(function(){f.addContributors.focusOnFirstNameInput(),f.addContributors.updateCloseButton()})}}();
//# sourceMappingURL=main.min.js.map